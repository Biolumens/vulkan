cmake_minimum_required(VERSION 3.16)
set(CMAKE_CXX_STANDARD 17)

project(jonnycube)

set(CMAKE_SYSTEM_NAME Windows)

include(FetchContent)

find_package(Vulkan REQUIRED)
message(STATUS "Vulkan_INCLUDE_DIRS: ${Vulkan_INCLUDE_DIRS}")

FetchContent_Declare(
	GLFW
	GIT_REPOSITORY https://github.com/glfw/glfw.git
	GIT_TAG 3.4
)

FetchContent_Declare(
	GLM
	GIT_REPOSITORY https://github.com/g-truc/glm.git
	GIT_TAG 1.0.1 
)

FetchContent_Declare(
	imgui
	GIT_REPOSITORY https://github.com/ocornut/imgui.git
	GIT_TAG v1.92.1
)

FetchContent_MakeAvailable(GLFW)
FetchContent_MakeAvailable(GLM)
FetchContent_MakeAvailable(imgui)

file(GLOB imgui_SRC CONFIGURE_DEPENDS ${imgui_SOURCE_DIR}/*.cpp)
add_library(
	imgui
	${imgui_SRC}
	"${imgui_SOURCE_DIR}/backends/imgui_impl_glfw.cpp"
	"${imgui_SOURCE_DIR}/backends/imgui_impl_vulkan.cpp"
)

target_link_libraries(imgui PUBLIC Vulkan::Vulkan glfw)


target_include_directories(imgui PUBLIC 
	${imgui_SOURCE_DIR}
	${imgui_SOURCE_DIR}/backends
	${glfw_SOURCE_DIR}/include
	${Vulkan_INCLUDE_DIRS}
)


file(GLOB_RECURSE SRC_FILES CONFIGURE_DEPENDS "${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp")

add_executable(${CMAKE_PROJECT_NAME} ${SRC_FILES})

target_link_libraries(${CMAKE_PROJECT_NAME} PRIVATE imgui Vulkan::Vulkan glfw)

target_include_directories(${CMAKE_PROJECT_NAME} PRIVATE 
	${Vulkan_INCLUDE_DIRS}
	${glfw_SOURCE_DIR}/include
	${glm_SOURCE_DIR}
)

